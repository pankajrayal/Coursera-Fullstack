@using SkillSnap.Client.Services

@inject NavigationManager Navigation
@inject AuthService AuthService
@inject UserSessionService UserSessionService

<h3>Login</h3>
<h3>Welcome, @UserSessionService.Role</h3>

@if(!string.IsNullOrEmpty(ErrorMessage)) {
  <p style="color: red">@ErrorMessage</p>
}
<input @bind="Email" placeholder="Email" />
<input @bind="Password" type="password" placeholder="Password" />
<button @onclick="PerformLogin">Login</button>

@code {
  private string Email;
  private string Password;
  private string ErrorMessage;

  private async Task PerformLogin() {
    var success = await AuthService.LoginAsync(Email, Password);
    if(success) {
      UserSessionService.SetUserSession(Email, Email); // Replace with actual API data
      Navigation.NavigateTo("/");
    } else {
      ErrorMessage = "Invalid credentials.";
    }
  }
}